<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Color Studio</title>
    <link rel="stylesheet" href="output.css" />
    <style>
      /* .boxDiv {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;

        margin: 30px;

        align-items: center;
      } */

      .box {
        display: flex;
        flex-direction: column;
        /* text-align: center; */
        /* justify-content: center; */
        padding-left: 10px;
        padding-right: 10px;
        height: 120px;
        width: 125px;
        background-color: gainsboro;
        border-radius: 15px;
      }

      .name {
        font-size: 40px;
        font-weight: 600;
        padding: 10px;

        text-align: center;
        font-family: "Times New Roman", Times, serif;
        color: rgb(191, 239, 191);
      }
      .colorBtn {
        display: flex;
        justify-content: center;

        color: white;
        padding: 10px;
        padding-right: 25px;
        padding-left: 25px;

        border: none;
        font-size: 14px;
        cursor: pointer;
        align-items: center;
        margin-right: auto;
        margin-left: auto;
        border-radius: 50px;
      }

      .colorID {
        text-align: center;
        font-size: 15px;
        padding-top: 10px;
        font-family: Arial, Helvetica, sans-serif;
        color: white;
      }
      .colorName {
        font-size: 12px;
        font-family: sans-serif;
      }

      .saved-Color {
        display: flex;
        flex-direction: column;
        /* text-align: center; */
        /* justify-content: center; */
        padding-left: 10px;
        padding-right: 10px;
        height: 120px;
        width: 125px;
        background-color: gainsboro;
        border-radius: 15px;
      }

      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 10;
        transition: all 0.5s;
      }
    </style>
  </head>
  <body>
    <div
      class="colorsVisible absolute z-20 bg-white w-full max-h-fit flex flex-col mx-auto justify-center items-center"
      style="display: none"
    >
      <p class="text-center text-2xl font-bold">Favorite Colors:</p>
      <p class="">Your favorite colors will appear here</p>
      <br />
      <div
        class="savedColor flex flex-wrap mx-auto justify-center items-center gap-4"
      ></div>

      <button class="my-10">
        <span
          class="backHome text-sm cursor-pointer font-mono text-white bg-black p-1 py-2 px-10 w-40 rounded-full"
          >Back</span
        >
      </button>
    </div>

    <div class="relative flex flex-col justify-center items-center">
      <img
        src="images/color (4).jpg"
        class="imageClick h-screen object-cover w-full"
        alt=""
      />
      <div
        class="absolute z-10 mx-auto flex flex-col justify-center items-center"
      >
        <div class="bottom-0">
          <span class="text-[10px] text-white"
            >Made by Constance Mmesoma Nwokem</span
          >
        </div>
        <div class="top-0">
          <div class="name uppercase">Color Studio</div>

          <button
            class="colorBtn bg-gradient-to-tr from-slate-500 via-emerald-800 to-zinc-500"
          >
            Click for Random Colors !
          </button>
          <div
            class="flex flex-wrap gap-4 mt-8 mx-10 justify-center items-center"
          >
            <div class="boxes">
              <div class="box">
                <span
                  class="love cursor-pointer text-2xl top-0 text-white"
                ></span>
                <span class="colorID pt-2">#CCCCCC</span>
                <p class="colorName pt-2 text-center text-white"></p>
              </div>
            </div>
            <div class="boxes">
              <div class="box">
                <span
                  class="love cursor-pointer text-2xl top-0 text-white"
                ></span>
                <span class="colorID pt-4">#CCCCCC</span>
                <p class="colorName pt-2 text-center text-white"></p>
              </div>
            </div>
            <div class="boxes">
              <div class="box">
                <span
                  class="love cursor-pointer text-2xl top-0 text-white"
                ></span>
                <span class="colorID pt-4">#CCCCCC</span>
                <p class="colorName pt-2 text-center text-white"></p>
              </div>
            </div>
            <div class="boxes">
              <div class="box">
                <span
                  class="love cursor-pointer text-2xl top-0 text-white"
                ></span>
                <span class="colorID pt-4">#CCCCCC</span>
                <p class="colorName pt-2 text-center text-white"></p>
              </div>
            </div>

            <div class="boxes">
              <div class="box">
                <span
                  class="love cursor-pointer text-2xl top-0 text-white"
                ></span>
                <span class="colorID pt-4">#CCCCCC</span>
                <p class="colorName pt-2 text-center text-white"></p>
              </div>
            </div>
            <div class="boxes">
              <div class="box">
                <span
                  class="love cursor-pointer text-2xl top-0 text-white"
                ></span>
                <span class="colorID pt-4">#CCCCCC</span>
                <p class="colorName pt-2 text-center text-white"></p>
              </div>
            </div>
          </div>

          <div
            class="self-end items-end text-end z-10 fixed bottom-0 right-0 p-2 py-4"
          >
            <span
              class="favoritedColors text-xs cursor-pointer font-mono text-black bg-white p-1.5 px-5 rounded-full"
              >Favorite Colors</span
            >
          </div>
        </div>
      </div>
    </div>
    <div class="flex justify-center items-center">
      <p
        id="snackbar"
        class="bg-black bg-opacity-80 z-20 text-white text-center text-sm fixed bottom-0 rounded-md p-2 w-fit my-6 px-6"
        style="display: none"
      >
        Added from favorite
        <!-- <span id="saved">View</span> -->
      </p>
    </div>

    <div class="overlay hidden"></div>
    <script>
      let click = 0;
      const loveEmoji = "\u2661";
      const removeEmoji = "\u2665";

      document
        .querySelector(".favoritedColors")
        .addEventListener("click", function () {
          const savedColorsDiv = document.querySelector(".colorsVisible");
          const overlay = document.querySelector(".overlay");
          if (savedColorsDiv.style.display === "none") {
            savedColorsDiv.style.display = "flex";
            overlay.style.display = "block";
          }
        });

      document
        .querySelector(".backHome")
        .addEventListener("click", function () {
          const savedColorsDiv = document.querySelector(".colorsVisible");
          const overlay = document.querySelector(".overlay");
          if (savedColorsDiv.style.display === "flex") {
            savedColorsDiv.style.display = "none";
            overlay.style.display = "none";
          }

          // document.addEventListener("keydown", function (e) {
          //   if (e.key === "Escape" && !modal.classList.contains("hidden")) {
          //     closeModal();
          //   }
          // });
        });

      document.querySelector(".overlay").addEventListener("click", function () {
        const savedColorsDiv = document.querySelector(".colorsVisible");
        const overlay = document.querySelector(".overlay");
        if (savedColorsDiv.style.display === "flex") {
          overlay.style.display = "none";
          savedColorsDiv.style.display = "none";
        }
      });

      document
        .querySelector(".colorBtn")
        .addEventListener("click", function (e) {
          document.querySelectorAll(".boxes").forEach((box) => {
            const newColor = hexColor();
            box.querySelector(".box").style.backgroundColor = newColor;
            box.querySelector(".colorID").textContent = newColor;

            box.querySelector(".colorName").textContent = rgbColor(newColor);

            box.querySelector(".love").innerHTML = loveEmoji;
            click = 1;
            console.log(box.querySelector(".love").innerHTML);
          });
        });
      // &#x2665; &#9825;
      function hexColor() {
        const letters = "0123456789ABCDEF";
        let color = "#";
        for (let i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }

      function rgbColor(hex) {
        const bigint = parseInt(hex.slice(1), 16);
        const r = (bigint >> 16) & 255;
        const g = (bigint >> 8) & 255;
        const b = bigint & 255;
        return `rgb(${r}, ${g}, ${b})`;
      }

      const snackbar = document.getElementById("snackbar");

      document.querySelectorAll(".love").forEach((emoji) => {
        emoji.innerHTML = loveEmoji;
        console.log(emoji.textContent);
        emoji.addEventListener("click", function () {
          const box = emoji.parentElement;

          const hexColor = box.querySelector(".colorID").textContent;
          console.log(hexColor);

          const rgbColor = box.querySelector(".colorName").textContent;
          console.log(rgbColor);
          if (click < 1) {
            console.log("CLICK THE COLOR BUTTON FIRST!");
          } else if (click === 1 && emoji.innerHTML === loveEmoji) {
            savedColors(box, hexColor, rgbColor);
            emoji.innerHTML = removeEmoji;

            snackbar.style.display = "block";
            snackbar.textContent = "Added to favorite";
            console.log(emoji.innerHTML);
            setTimeout(function () {
              snackbar.style.display = "none";
            }, 600);
          } else {
            removeColor(hexColor);
            console.log("color removeed");
            emoji.innerHTML = loveEmoji;
            snackbar.style.display = "block";
            snackbar.textContent = "Removed from favorite";
            console.log("Removed from favorite");
            setTimeout(function () {
              snackbar.style.display = "none";
            }, 600);
          }

          // const eachBox = emoji.target.closet(".box");
          // const colorName = box.querySelector(".colorID").textContent;
          // const rgbValue = box.querySelector(".colorName").textContent;
          // saveColor(colorName, rgbValue);
        });
      });

      function savedColors(box, hex, rgb) {
        const savedColorsDiv = document.querySelector(".savedColor");
        const colorBox = document.createElement("div");
        colorBox.classList.add("saved-Color");
        colorBox.style.backgroundColor = hex;
        colorBox.innerHTML = `
       <span class="remove-Color top-0 text-2xl text-white  cursor-pointer">${removeEmoji}</span>
        <div class="colorID">${hex}</div>
        <p class="colorName text-white text-center">${rgb}</p>

        `;
        console.log(colorBox);

        colorBox
          .querySelector(".remove-Color")
          .addEventListener("click", () => {
            savedColorsDiv.removeChild(colorBox);
            // emoji.innerHTML = "save";
            box.querySelector(".love").innerHTML = loveEmoji;

            snackbar.style.display = "block";
            snackbar.textContent = "Removed from favorite";

            setTimeout(function () {
              snackbar.style.display = "none";
            }, 600);
          });
        savedColorsDiv.appendChild(colorBox);
        // box.dataset.savedColorBoxId = colorBox;
      }

      function removeColor(hex) {
        const savedColorsDiv = document.querySelector(".savedColor");
        const colorBoxes = savedColorsDiv.querySelectorAll(".saved-Color");
        colorBoxes.forEach((colorBox) => {
          if (colorBox.querySelector(".colorID").textContent === hex) {
            savedColorsDiv.removeChild(colorBox);
            console.log("color removeed");
          }
        });
      }

      // document.getElementById("viewColors").addEventListener("click", () => {
      //   window.location.href = "savedColors.html";
      // });
    </script>
  </body>
</html>
